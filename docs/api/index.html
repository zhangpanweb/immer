<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>API overview · Immer</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;div id=&quot;codefund&quot;&gt;&lt;!-- fallback content --&gt;&lt;/div&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="API overview · Immer"/><meta property="og:type" content="website"/><meta property="og:url" content="https://immerjs.github.io/immer/"/><meta property="og:description" content="&lt;div id=&quot;codefund&quot;&gt;&lt;!-- fallback content --&gt;&lt;/div&gt;"/><meta property="og:image" content="https://immerjs.github.io/immer/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://immerjs.github.io/immer/img/undraw_tweetstorm.svg"/><meta name="robots" content="noindex"/><link rel="shortcut icon" href="/immer/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-65632006-3', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://codefund.io/properties/439/funder.js"></script><script src="/immer/js/scrollSpy.js"></script><link rel="stylesheet" href="/immer/css/main.css"/><script src="/immer/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/immer/"><img class="logo" src="/immer/img/favicon.ico" alt="Immer"/><h2 class="headerTitleWithLogo">Immer</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/immer/docs/introduction" target="_self">Documentation</a></li><li class=""><a href="https://github.com/immerjs/immer" target="_self">GitHub</a></li><li class="siteNavGroupActive"><a href="/immer/docs/support" target="_self">Support Immer</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Advanced Features</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/immer/docs/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/produce">Using produce</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/curried-produce">Curried producers</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/example-reducer">Example Reducer</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/example-setstate">React setState example</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced Features</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/immer/docs/api">API overview</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/typescript">TypeScript / Flow</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/return">Returning new data from producers</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/patches">Patches</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/freezing">Auto freezing</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/original">Original</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/async">Async produce / createDraft</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/complex-objects">Working with classes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Resources</h3><ul class=""><li class="navListItem"><a class="navItem" href="/immer/docs/performance">Immer performance</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/resources">External resources</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/pitfalls">Pitfalls</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/built-with">Built with Immer</a></li><li class="navListItem"><a class="navItem" href="/immer/docs/support">Supporting immer</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/immerjs/immer/edit/master/docs/api.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">API overview</h1></header><article><div><span><div id="codefund"><!-- fallback content --></div>
<table>
<thead>
<tr><th>Exported name</th><th>Description</th><th>Section</th></tr>
</thead>
<tbody>
<tr><td><code>applyPatches</code></td><td>Given a base state or draft, and a set of patches, applies the patches</td><td><a href="/immer/docs/patches">Patches</a></td></tr>
<tr><td><code>createDraft</code></td><td>Given a base state, creates a mutable draft for which any modifications will be recorded</td><td><a href="/immer/docs/async">Async</a></td></tr>
<tr><td><code>Draft&lt;T&gt;</code></td><td>Exposed TypeScript type to convert an immutable type to a mutable type</td><td><a href="/immer/docs/typescript">TypeScript</a></td></tr>
<tr><td><code>finishDraft</code></td><td>Given an draft created using <code>createDraft</code>, seals the draft and produces and returns the next immutable state that captures all the changes</td><td><a href="/immer/docs/async">Async</a></td></tr>
<tr><td><code>Immer</code></td><td>constructor that can be used to create a second &quot;immer&quot; instance (exposing all APIs listed in this instance), that doesn't share its settings with global instance. Can also be used to attach further hooks that are triggered during object finalization, such as <code>onAssign</code>, <code>onDelete</code> and <code>onCopy</code>.</td><td><a href="https://github.com/immerjs/immer/blob/cb1c6dd8a33073aaa0a4d881c94ec7ab1c1be7f6/src/immer.d.ts#L224-L233">See source</a></td></tr>
<tr><td><code>immerable</code></td><td>Symbol that can be added to a constructor or prototype, to indicate that Immer should treat the class as something that can be safely drafted</td><td><a href="/immer/docs/complex-objects">Classes</a></td></tr>
<tr><td><code>Immutable&lt;T&gt;</code></td><td>Exposed TypeScript type to convert mutable types to immutable types</td><td></td></tr>
<tr><td><code>isDraft</code></td><td>Returns true if the given object is a draft object</td><td></td></tr>
<tr><td><code>isDraftable</code></td><td>Returns true if Immer is capable of turning this object into a draft. Which is true for: arrays, objects without prototype, objects with <code>Object</code> as their prototype, objects that have the <code>immerable</code> symbol on their constructor or prototype</td><td></td></tr>
<tr><td><code>nothing</code></td><td>Value that can be returned from a recipe, to indicate that the value <code>undefined</code> should be produced</td><td><a href="/immer/docs/return">Return</a></td></tr>
<tr><td><code>original</code></td><td>Given a draft object (doesn't have to be a tree root), returns the the original object at the same path in the original state tree, if present</td><td><a href="/immer/docs/original">Original</a></td></tr>
<tr><td><code>Patch</code></td><td>Exposed TypeScript type, describes the shape of an (inverse) patch object</td><td><a href="/immer/docs/patches">Patches</a></td></tr>
<tr><td><code>produce</code></td><td>The core API of Immer, also exposed as the <code>default</code> export</td><td><a href="/immer/docs/produce">Produce</a></td></tr>
<tr><td><code>produceWithPatches</code></td><td>Works the same as <code>produce</code>, but instead of just returning the produced object, it returns a tuple, consisting of <code>[result, patches, inversePatches]</code>.</td><td><a href="/immer/docs/patches">Patches</a></td></tr>
<tr><td><code>setAutoFreeze</code></td><td>Enables / disables automatic freezing of the trees produces. By default enabled in development builds</td><td><a href="/immer/docs/freezing">Freezing</a></td></tr>
<tr><td><code>setUseProxies</code></td><td>Can be used to disable or force the use of <code>Proxy</code> objects. Useful when filing bug reports.</td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="importing-immer"></a><a href="#importing-immer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Importing immer</h2>
<p><code>produce</code> is exposed as the default export, but optionally it can be used as name import as well, as this benefits some older project setups. So the following imports are all correct, where the first is recommended:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> produce <span class="hljs-keyword">from</span> <span class="hljs-string">"immer"</span>
<span class="hljs-keyword">import</span> {produce} <span class="hljs-keyword">from</span> <span class="hljs-string">"immer"</span>

<span class="hljs-keyword">const</span> {produce} = <span class="hljs-built_in">require</span>(<span class="hljs-string">"immer"</span>)
<span class="hljs-keyword">const</span> produce = <span class="hljs-built_in">require</span>(<span class="hljs-string">"immer"</span>).produce
<span class="hljs-keyword">const</span> produce = <span class="hljs-built_in">require</span>(<span class="hljs-string">"immer"</span>).default

<span class="hljs-keyword">import</span> unleashTheMagic <span class="hljs-keyword">from</span> <span class="hljs-string">"immer"</span>
<span class="hljs-keyword">import</span> {produce <span class="hljs-keyword">as</span> unleashTheMagic} <span class="hljs-keyword">from</span> <span class="hljs-string">"immer"</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/immer/docs/example-setstate"><span class="arrow-prev">← </span><span class="function-name-prevnext">React setState example</span></a><a class="docs-next button" href="/immer/docs/typescript"><span class="function-name-prevnext">TypeScript / Flow</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#importing-immer">Importing immer</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2019 Michel Weststrate</section></footer></div></body></html>